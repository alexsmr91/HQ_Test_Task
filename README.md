# HQ_Test_Task
## Задание

### Архитектура
1. Создать сущность продукта. У продукта должен быть создатель этого продукта(автор/преподаватель). Название продукта, дата и время старта, стоимость
2. Определить, каким образом мы будем понимать, что у пользователя(клиент/студент) есть доступ к продукту. 
3. Создать сущность урока. Урок может принадлежать только одному продукту.. В уроке должна быть базовая информация: название, ссылка на видео.
4. Создать сущность группы. По каждому продукту есть несколько групп пользователей, которые занимаются в этом продукте. Минимальное и максимальное количество юзеров в группе задается внутри продукта. Группа содержит следующую информацию: ученики, которые состоят в группе, название группы, принадлежность группы к продукту 

### Сервис
1. При получении доступа к продукту, распределять пользователя в группу. Если продукт ещё не начался, то можно пересобрать группы так, чтобы везде было примерно одинаковое количество участников. По-умолчанию алгоритм распределения должен работать заполняя до максимального значения реализацию алгоритма распределения по группам так, чтобы в каждой группе количество участников не отличалось больше, чем на 1. При этом, минимальные и максимальные значения участников в группе должны быть учтены.
2. Реализовать API на список продуктов, доступных для покупки, которое бы включало в себя основную информацию о продукте и количество уроков, которые принадлежат продукту. 
3. Просмотр уроков у купленного продукта


## Требования для запуска

- Docker
- Docker Compose

### Начало работы

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/alexsmr91/HQ_Test_Task
    ```

2. **Перейдите в каталог:**

    ```bash
    cd HQ_Test_Task/edu_platform
    ```
3. **Создайте .env файл, пример файла:**

   ```bash
   DEBUG=False
   SECRET_KEY="django-insecure-d+0g$gptfa0aiw%000+gm_k)zj0ml0d00sb_*&0!^e@bb_l%)g"
   DJANGO_SUPERUSER_EMAIL="e@ma.il"
   DJANGO_SUPERUSER_PASSWORD="qwe123"
    ```
   
4. **Перейдите в каталог:**

    ```bash
    cd HQ_Test_Task
    ```
5. **Соберите и запустите проект с использованием Docker Compose:**
    ```bash
    docker-compose up -d
    ```
   Эта команда загрузит необходимые образы Docker, соберет проект и запустит контейнеры.


6. **Доступ к API по адресу**

   [http://localhost:8000/api/](http://localhost:8000/api/).


7. **Доступ к Админке по адресу**

   [http://localhost:8000/admin/](http://localhost:8000/admin/).
   ```bash
   login: admin

   password: qwe123 (или тот который указали в .env файле)
   ```

8. **Список ендпоинтов:**

   ```bash
   http://localhost:8000/api/available_product/ (Доступные к покупке продукты)
   http://localhost:8000/api/product/ (Все продукты, у преподавателей и админов есть доступ на создание и редактирование)
   http://localhost:8000/api/user/ (Просмотр информации об авторе продукта, регистрация нового пользователя)
   http://localhost:8000/api/buy_product/ (покупка продукта)
   ```

9. **Остановка проекта**

   Чтобы остановить проект и удалить контейнеры, используйте следующую команду:

   ```bash
    docker-compose down
   ```
   

10. **Тестирование**
   
    Прилагаю набор тестов для Postman, необходимо импортировать коллекцию и окружение в Postman, файлы находятся по адресу: 

    ```bash
    HQ_Test_Task/Postman_tests
    ```
    Если в .env файле меняли пароль суперпользователя, то в окружении его тоже надо поменять в переменной default_admin_pass. База данных должна быть пустой для успешного прохождения всех тестов
